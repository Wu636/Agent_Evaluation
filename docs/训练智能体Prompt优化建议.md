# 训练智能体 Prompt 优化建议

## 📊 当前 Prompt 问题分析

### 问题1：评测点重叠度高

当前6个维度之间存在较多交叉：

| 维度 | 重叠问题 |
|-----|---------|
| 目标达成度 vs 流程遵循度 | 都涉及"任务顺序"和"环节完整性" |
| 教学策略 vs 交互体验 | 都涉及"引导式对话"和"反馈方式" |
| 幻觉控制 vs 目标达成度 | 都涉及"内容准确性"和"文档一致性" |

**→ 结果：LLM 在评估时会把相似的问题归到多个维度，导致分数趋同。**

---

### 问题2：评分描述不够明确

当前只有模糊的指引：
- "主体完整可给70-80分"
- "全部完成给85-95分"

**→ LLM 倾向于打"安全分数"（70-85之间），避免极端值。**

---

### 问题3：缺少负面行为的硬扣分规则

当前主要是"加分逻辑"，没有明确的扣分规则：
- 出现幻觉扣多少分？
- 直接给答案扣多少分？
- 漏掉一个环节扣多少分？

---

### 问题4：证据引用不够强制

`evidence` 和 `issues` 字段没有强制要求引用对话中的具体轮次或原文，导致评估依据模糊。

---

## 💡 优化建议

### 建议1：明确差异化的评估焦点

**每个维度应该有独占的评估对象，减少交叉：**

| 维度 | 专注评估什么 | 不评估什么 |
|-----|------------|-----------|
| 目标达成度 | 知识点覆盖率（checklist打勾） | 教学方法、对话风格 |
| 教学策略 | 是否用提问引导（非告知式） | 内容正确性 |
| 流程遵循度 | 环节顺序、切换时机 | 环节内的具体内容 |
| 交互体验 | 语气、表达流畅度、个性化 | 内容对错 |
| 幻觉控制 | 事实准确性、参数一致性 | 表达方式 |
| 异常处理 | 偏离话题时的应对 | 正常流程 |

---

### 建议2：引入量化扣分规则

```markdown
## 扣分规则（每项扣15~15分）

### 严重问题（每项扣15分）
- 出现事实错误/幻觉
- 遗漏核心教学环节
- 直接给出最终答案（应引导）

### 中等问题（每项扣10分）
- 参数值不一致
- 环节顺序颠倒
- 重复使用相同话术3次以上

### 轻微问题（每项扣5分）
- 表达略显生硬
- 过渡语句不够自然
- 追问深度不足
```

---

### 建议3：强制证据引用格式

```json
{
  "issues": [
    {
      "description": "直接给出了答案，未引导思考",
      "location": "第5轮对话",
      "quote": "答案是选择1-2年生的健壮枝条",
      "severity": "high",
      "deduction": 15
    }
  ]
}
```

---

### 建议4：分化基准分逻辑

```markdown
## 评分基准

**起始分：75分**（假设智能体基本合格）

### 加分项（最高+25分）
- 完美的引导式教学 → +10分
- 自然的个性化表达 → +5分
- 优秀的知识深度延伸 → +5分
- 巧妙的纠错处理 → +5分

### 扣分项（见上述扣分规则）

**最终分数 = 75 + 加分 - 扣分**
```

---

## 📋 替换/新增建议

### 替换/新增建议：

| 现有维度 | 问题 | 建议 |
|---------|------|------|
| 异常处理力 (5%) | 权重太低、难以区分 | 可合并到"交互体验" |
| 流程遵循度 (15%) | 与目标达成度重叠 | 改为"节奏控制力"：评估对话的快慢节奏、等待时机 |

---

### 推荐新增的维度：

#### 1. 个性化与适应性 (10%)

评估智能体是否根据学生的表现调整教学策略：
- 学生答对了是否加快节奏？
- 学生困惑时是否换种方式解释？
- 是否记住并引用学生之前说过的内容？

#### 2. 对话效率 (10%)

评估对话的信噪比：
- 是否有冗余/重复的内容？
- 能否用更少的轮次完成教学？
- 每轮对话的信息密度是否合理？

#### 3. 元认知引导 (10%)

评估是否帮助学生"学会学习"：
- 是否引导学生反思自己的思考过程？
- 是否帮助学生建立知识框架？
- 是否鼓励学生总结归纳？

---

## 📊 优化后的维度结构建议

| 维度 | 权重 | 核心评估点 |
|-----|------|-----------|
| **目标覆盖度** | 35% | 知识点/环节的完成度（量化checklist） |
| **引导策略** | 20% | 提问式教学 vs 告知式教学 |
| **幻觉控制** | 15% | 内容准确性、参数一致性 |
| **个性化应对** | 10% | 对学生表现的适应性调整 |
| **对话效率** | 10% | 信噪比、冗余度控制 |
| **表达体验** | 10% | 语气、流畅度、自然度 |

**这样每个维度都有明确且不重叠的评估点，分数差异会更明显。**
